<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Oferta Especial ‚Äì 200 Receitas Exclusivas üçΩÔ∏è</title>
  <meta name="description" content="Upsell: 200 receitas exclusivas com desconto √∫nico e limitado. Oferta v√°lida apenas ap√≥s pagamento aprovado.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://sdk.mercadopago.com/js/v2"></script>
  <style>
    :root { --brand: #22c55e; }
    body{ font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial,'Noto Sans','Liberation Sans',sans-serif; }
    .container{ max-width:980px; }
    .shadow-soft{ box-shadow:0 10px 25px rgba(2,6,23,.08); }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">
  <!-- Header -->
  <header class="bg-white border-b border-slate-200 sticky top-0 z-40">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-2xl bg-emerald-100 flex items-center justify-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-emerald-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 6v6l4 2"/></svg>
        </div>
        <span class="font-extrabold tracking-tight">Dieta Pronta Online</span>
      </div>
      <div class="text-sm text-slate-500 hidden md:block">Oferta exclusiva para novos clientes</div>
    </div>
  </header>

  <!-- Hero -->
  <section class="bg-gradient-to-b from-white to-slate-100">
    <div class="container mx-auto px-4 py-10 text-center">
      <h1 class="text-3xl md:text-5xl font-extrabold leading-tight text-emerald-600">üéâ Parab√©ns! Seu pagamento foi aprovado!</h1>
      <p class="mt-4 text-lg text-slate-700 max-w-2xl mx-auto">
        E pra te ajudar a ter <strong>resultados ainda mais r√°pidos e deliciosos</strong>, preparamos uma oportunidade <strong>√∫nica e exclusiva</strong> ‚Äî dispon√≠vel apenas agora!
      </p>
    </div>
  </section>

  <!-- Oferta -->
  <section id="oferta" class="py-10">
    <div class="container mx-auto px-4 grid lg:grid-cols-2 gap-8 items-center">
      <div class="rounded-2xl overflow-hidden shadow-soft border border-slate-200 bg-white">
        <img src="https://dietapronta.online/receitas.jpg" alt="Receitas saud√°veis" class="w-full h-72 object-cover"/>
        <div class="p-6">
          <h2 class="text-2xl font-extrabold">200 Receitas Exclusivas üçΩÔ∏è</h2>
          <p class="mt-3 text-slate-700">
            Receitas simples, pr√°ticas e deliciosas criadas por nossa equipe de especialistas para <strong>acelerar seus resultados</strong> e tornar sua dieta mais f√°cil de seguir.
          </p>
          <ul class="mt-4 space-y-2 text-slate-700">
            <li>‚úÖ Caf√© da manh√£ energizante</li>
            <li>‚úÖ Almo√ßos e jantares equilibrados</li>
            <li>‚úÖ Lanches r√°pidos e saud√°veis</li>
            <li>‚úÖ Sobremesas fit irresist√≠veis</li>
          </ul>
        </div>
      </div>

      <aside class="p-6 rounded-2xl bg-white border border-slate-200 shadow-soft text-center">
        <div class="text-sm text-slate-500">Oferta Limitada</div>
        <h3 class="text-2xl font-extrabold mt-1 text-emerald-600">De R$ 149,90 por apenas R$ 9,90!</h3>
        <p class="mt-3 text-slate-700">
          Essa √© a sua chance de transformar sua alimenta√ß√£o com praticidade e sabor ‚Äî gastando menos que um caf√©! ‚òï
        </p>
        <div class="mt-4 p-4 bg-emerald-50 border border-emerald-200 rounded-xl text-emerald-900 text-sm">
          <strong>‚ö†Ô∏è Aten√ß√£o:</strong> essa condi√ß√£o especial aparece <u>somente uma vez</u>.  
          Se sair desta p√°gina, ela desaparecer√° para sempre!
        </div>

        <!-- Container para o checkout -->
        <div id="mp-checkout" class="mt-6"></div>
        <button id="btnPagamento" class="mt-4 w-full rounded-xl px-5 py-3 bg-[var(--brand)] text-white font-semibold text-lg hover:bg-emerald-600 transition">
          Quero minhas 200 receitas por R$ 9,90 ‚ûú
        </button>

        <div class="mt-4 text-xs text-slate-500 text-center">
          Acesso imediato ‚Ä¢ Conte√∫do digital ‚Ä¢ Garantia de satisfa√ß√£o
        </div>
      </aside>
    </div>

    <!-- Prova social -->
    <div class="container mx-auto mt-16 px-4 text-center">
      <p class="text-sm uppercase text-emerald-600 font-semibold tracking-wide">Mais de 12.000 pessoas j√° aproveitaram</p>
      <h4 class="text-2xl font-extrabold mt-2">Resultados reais, receitas reais üíö</h4>
      <p class="mt-2 text-slate-600 max-w-2xl mx-auto">
        Esse pacote foi criado com base no feedback dos nossos pacientes ‚Äî pessoas comuns que conquistaram resultados incr√≠veis sem abrir m√£o do prazer de comer bem.
      </p>
    </div>
  </section>

  <footer class="py-10 text-center text-sm text-slate-500">
    <p>¬© <span id="year"></span> Dieta Pronta Online. Todos os direitos reservados.</p>
  </footer>

  <!-- SCRIPT FINAL -->
  <script>
  document.addEventListener("DOMContentLoaded", function(){
    function $(id){ return document.getElementById(id); }
    const MP_PUBLIC_KEY = "APP_USR-87cc4830-2ac4-410d-82b8-f295612a75b0";
    const MP_ENDPOINT_UPSELL = "https://dietapronta.online/api/mp-preference-upsell";

    // üîπ Cria nova refer√™ncia exclusiva para o upsell
    const ref_upsell = "ref-upsell-" + Date.now() + "-" + Math.random().toString(36).slice(2,8);
    try { localStorage.setItem("mp_upsell_ref", ref_upsell); } catch(e){}

    // üîπ Carrega dados do cliente da compra principal
    const ref_principal = localStorage.getItem("mp_external_ref") || "";
    const nome  = localStorage.getItem("lead_nome") || "";
    const email = localStorage.getItem("lead_email") || "";
    const whats = localStorage.getItem("lead_whats") || "";

    if($("year")) $("year").textContent = (new Date()).getFullYear();

    // ‚úÖ Ao clicar, cria a prefer√™ncia e abre o checkout box
    $("btnPagamento").addEventListener("click", async () => {
      $("btnPagamento").disabled = true;
      $("btnPagamento").textContent = "Gerando pagamento...";

      try {
        const resp = await fetch(MP_ENDPOINT_UPSELL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            valor: 9.90,
            titulo: "200 Receitas Saud√°veis",
            external_reference: ref_upsell, // ‚úÖ NOVO REF √öNICO
            customer_name: nome,
            customer_email: email,
            customer_whatsapp: whats,
            parent_ref: ref_principal // opcional para rastrear origem
          })
        });

        const data = await resp.json();
        if (!data || !data.id) throw new Error("Falha ao criar prefer√™ncia.");

        const mp = new MercadoPago(MP_PUBLIC_KEY, { locale: "pt-BR" });
        mp.checkout({
          preference: { id: data.id },
          autoOpen: true,
          render: { container: "#mp-checkout", label: "Pagar R$ 9,90" }
        });

        $("btnPagamento").textContent = "Abrindo pagamento...";
      } catch (e) {
        console.error("Erro ao gerar pagamento:", e);
        $("btnPagamento").textContent = "Erro, tente novamente";
      }
      $("btnPagamento").disabled = false;
    });
  });
  </script>
</body>
</html>
